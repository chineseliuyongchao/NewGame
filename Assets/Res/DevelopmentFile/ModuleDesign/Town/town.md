# 聚落设计文档

## 聚落等级

聚落没有种类区别，只会有等级区别。等级和人口以及财富挂钩。

### 聚落等级变化

聚落一共有9个等级

定居点->村落->大型村落->村堡->城堡->城镇->大型城镇->巨型城镇->大都市

## 聚落驻军

驻军有两部分，一部分是自发组建的民兵，另一部分是由聚落管理者或者国家组建的驻军。

### 民兵

民兵数量应该由本地人口，经济情况以及粮食情况确定。本地人口和粮食情况会影响民兵的数量，经济情况会影响民兵的数量（没有兵种系统，暂时不作处理）。

民兵数量会向合理民兵数量靠拢，如果大于或者小于这个数字都应该在每天更新民兵数量时向合理数量浮动。

合理民兵数量=聚落民兵数量基数*聚落民兵数量系数

聚落民兵数量基数=MIN（聚落男性数量，聚落粮食储量/(单人每日粮食消耗*10)(算出存量够多少人吃十天)）

聚落民兵数量系数=0.05（后期会根据各种加成浮动）

聚落民兵浮动数量=MIN（合理民兵数量-聚落民兵实际数量，合理民兵数量*聚落民兵变化系数）

聚落民兵变化系数=0.05（后期会根据各种加成浮动）

民兵数量刷新应该是每天的3时

### 驻军

暂不处理

## 聚落繁荣度

聚落繁荣度是衡量一个聚落总体实力的指标，由人口和单日总体收入决定。
聚落的收入分为食物产出收入以及工场产出收入。
食物产出的经济流动由农民自行进行，不涉及经济单位之间的流动，所以钱可以直接通过模拟得到。
工场收入为家族收入，这部分钱在流进各个家族口袋的同时也会计入到聚落收入中。

### 聚落繁荣度公式

聚落单日总体收入=聚落单日所有工场收入+聚落单日粮食产出*单日粮食单价

聚落繁荣度=聚落总人口* 人口繁荣度系数+聚落单日总收入* 收入繁荣度系数